% A pure minimalistic LaTeX-Beamer theme for everyone to use.
% Copyright (C) 2020 Kai Norman Clasen

% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.

% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.

% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <https://www.gnu.org/licenses/>.

% This file is part of beamertheme-kimim.

% If problems/bugs are found or enhancements are desired, please contact
% me over: https://github.com/kimim/beamertheme-kimim

\ProvidesPackage{beamerfontthemekimim}[v2.0.0]
\RequirePackage{ifthen}
\RequirePackage{fontspec}

% Adds micro-typographical enhancements
% Has no significant impact on presentation slides
% Adds issues to japanese packages...
% \RequirePackage{microtype}
\mode<presentation>

\newboolean{customfont}
\setboolean{customfont}{false}
\newboolean{noto}
\setboolean{noto}{false}

\DeclareOptionBeamer{customfont}{\setboolean{customfont}{true}}
\DeclareOptionBeamer{noto}{\setboolean{noto}{true}}
\ProcessOptionsBeamer

\RequirePackage{silence}
% I have no clue how I can fix this warning
\WarningFilter{latex}{Font shape declaration has incorrect series value}
\RequirePackage{iftex}

\ifpdftex
  \RequirePackage[T1]{fontenc}
\fi

%% \ifthenelse{\boolean{noto}}{%
%%     % If Noto overwrites the fira fonts settings
%%   \RequirePackage{Roboto}
%% }{%
%%     \ifthenelse{\boolean{customfont}}{%
%%       % Load default fonts
%%     }{%
%%         % By default load Fira
%%       \RequirePackage[sfdefault]{FiraSans}
%%         \RequirePackage{FiraMono}
%%     }
%% }

\RequirePackage[sfdefault]{Roboto}
\RequirePackage{Roboto}

%%\setmainfont{}
%%\setsansfont{}
%%\setmonofont{Consolas}

\renewcommand\footnotesize{\fontsize{4pt}{6pt}\selectfont}
\renewcommand\small{\fontsize{6pt}{8pt}\selectfont}
\renewcommand\normalsize{\fontsize{8pt}{10pt}\selectfont}
\renewcommand\large{\fontsize{10pt}{12pt}\selectfont}
\renewcommand\Large{\fontsize{12pt}{14pt}\selectfont}
\renewcommand\LARGE{\fontsize{14pt}{20pt}\selectfont}

\setbeamerfont{normal text}{family=\sffamily, size=\normalsize, series=\mdseries}
%%\setbeamerfont{alerted text}{parent=normal text}

\setbeamerfont{structure}{parent=normal text}

\setbeamerfont{all titles}{parent=normal text}
\setbeamerfont{presentation title}{parent=all titles, size=\LARGE, series=\bfseries}
\setbeamerfont{subtitle}{parent=all titles, shape=\upshape, size=\large}
\setbeamerfont{frametitle}{parent=all titles, size=\Large, series=\bfseries}
\setbeamerfont{framesubtitle}{parent=all titles, size=\normalsize}

\setbeamerfont{footline}{parent=structure,size=\footnotesize}
\setbeamerfont{title in head/foot}{parent=footline, series=\bfseries}
\setbeamerfont{author in head/foot}{parent=footline}

\setbeamerfont{section in toc}{parent=normal text}
\setbeamerfont{subsection in toc}{parent=section in toc}
\setbeamerfont{subsubsection in toc}{parent=subsection in toc}

\setbeamerfont{block title}{parent=normal text, size=\normalsize}
\setbeamerfont{block body}{parent=normal text, size=\small}
\setbeamerfont{block title alerted}{parent=normal text, size=\normalsize}
\setbeamerfont{block body alerted}{parent=normal text, size=\small}
\setbeamerfont{block title example}{parent=normal text, size=\normalsize}
\setbeamerfont{block body example}{parent=normal text, size=\small}
\setbeamerfont{theorem}{parent=normal text, size=\normalsize}
\setbeamerfont{theorem body}{parent=normal text, size=\small}
\setbeamerfont{example}{parent=normal text, size=\normalsize}
\setbeamerfont{example body}{parent=normal text, size=\small}
\setbeamerfont{proof}{parent=normal text, size=\normalsize}
\setbeamerfont{proof body}{parent=normal text, size=\small}

\setbeamerfont{title}{parent=normal text, size=\LARGE, series=\bfseries}
\setbeamerfont{author}{parent=normal text, size=\small}
\setbeamerfont{institute}{parent=normal text, size=\small}
\setbeamerfont{date}{parent=normal text, size=\small}

\setbeamerfont{caption}{parent=normal text, size=\small}
\setbeamerfont{caption name}{series=normal text, size=\small}

\setbeamerfont{itemize/enumerate body}{size=\normalsize}
\setbeamerfont{itemize/enumerate subbody}{size=\normalsize}
\setbeamerfont{itemize/enumerate subsubbody}{size=\normalsize}

\AtBeginEnvironment{block}{%
  \setbeamerfont{itemize/enumerate body}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate body alerted}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate subbody}{parent=itemize/enumerate body}
  \setbeamerfont{itemize/enumerate subsubbody}{parent=itemize/enumerate subbody}
}

\AtBeginEnvironment{alertblock}{%
  \setbeamerfont{itemize/enumerate body}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate body alerted}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate subbody}{parent=itemize/enumerate body}
  \setbeamerfont{itemize/enumerate subsubbody}{parent=itemize/enumerate subbody}
}

\AtBeginEnvironment{theorem}{%
  \setbeamerfont{itemize/enumerate body}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate body alerted}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate subbody}{parent=itemize/enumerate body}
  \setbeamerfont{itemize/enumerate subsubbody}{parent=itemize/enumerate subbody}
}

\AtBeginEnvironment{example}{%
  \setbeamerfont{itemize/enumerate body}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate body alerted}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate subbody}{parent=itemize/enumerate body}
  \setbeamerfont{itemize/enumerate subsubbody}{parent=itemize/enumerate subbody}
}

\AtBeginEnvironment{proof}{%
  \setbeamerfont{itemize/enumerate body}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate body alerted}{parent=normal text, size=\small}
  \setbeamerfont{itemize/enumerate subbody}{parent=itemize/enumerate body}
  \setbeamerfont{itemize/enumerate subsubbody}{parent=itemize/enumerate subbody}
}

\mode<all>
